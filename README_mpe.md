# PyQt5 如何利用 Qt Designer

当使用 QtDesigner 编辑了界面后，有三种方式将它加载到代码

## 1. 使用 PyQt5.uic.loadUi

loadUi 接收两个参数：ui 文件路径和代码中的基类对象，用于将 ui 文件中的配置加载到传入的对象上。

1. 基类对象要求与 ui 文件中的基类拥有相同的类型
2. ui 文件中定义的子对象会被创建并赋值为基类对象的属性

这种方法可以做到 界面-逻辑 分离，但由于 Python 为解释性语言，如果 ui 文件保存为独立的文件，
那么在打包时可能会带来麻烦，需要对打包工具进行特殊的设置，将 ui 文件包含在包内；同时也需要将
代码中 loadUi 传入的路径修改为相对于包的路径，否则会从运行程序的当前工作目录开始寻找，这可能和
预期想法不一致。

对于本项目使用的猜数字游戏，从代码文件 `guessnumber1.py` 可以看到使用了这种方法。

@import "guessnumber1.py"

## 2. 用 PyQt5.uic 将 ui 文件转换成 Python 代码

PyQt5 提供了 pyuic5 这个命令行工具用于将 Designer 编辑的 ui 文件转换成 Python 代码。
会根据 ui 文件中的内容产生一个名为 `Ui_*` 的类。

```sh
pyuic5 -o guessnumber_ui.py
```

@import "guessnumber_ui.py"

`Ui_*` 类拥有 `setupUi` 方法，在使用时将需要被设置的基类传入。实际上 loadUi 方法和这个方法做了相类似的事。
只不过 `Ui_` 的 setupUi 方法将子对象绑定到 `Ui_` 类的实例上了，而 loadUi 是绑定到传入的对象上。

这导致要引用界面上的子控件，需要引用 `Ui_` 实例。一般在代码中绑定为基类的 .ui 属性。

@import "guessnumber2.py"

用这种方法的话，没有对 ui 文件路径的依赖。

## 1.1 用 loadUi 方法，更彻底的界面/逻辑分离

界面单独创建一个类，逻辑创建另一个类。
将界面类的实例挂载为逻辑类的一个属性。

@import "guessnumber1_1.py"

## 什么是信号-槽机制

简单理解，信号：一个事件发生产生一个信号；槽：接收这个信号并做出反应。

从代码上看，就是设置当一个事件发生时调用一个函数。
